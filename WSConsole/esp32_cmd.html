<!DOCTYPE html>
<html>

<head>
    <title>Consola ESP32</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <link rel="shortcut icon" href="https://cdn.icon-icons.com/icons2/350/PNG/512/bash_36261.png">

    <script type="module" src="WSConsole.mjs"></script>

</head>

<body>

    <h2 style="text-align: center">Consola Esp32</h2> 
    <div id="mi-contenedor" style="display: flex; margin-bottom: 20px;">
        <textarea id='console' rows='10' cols='50' style="flex: 1;"></textarea> 
    </div>
    <div id="mi-contenedor" style="display: flex;">
        <input id='command' style="flex: 1"></input> 
        <button id='send' style="width: auto" onclick='sendCommand()'>Enviar mensaje</button>
    </div>
    
    <script>     
        
        import {WSConsole} from './WSConsole.msj';

        let cmd = new WSConsole();

        // Para enviar mensaje cuando se presiona enter
        const input = document.getElementById("command");
        input.addEventListener("keyup", function(event) {
            if (event.keyCode === 13) {
                sendCommand();
            }
        });

        function sendCommand() {
            let command = document.getElementById('command');
            cmd.send(command.value); 
            document.command = "";
        }
        
    </script>
</body>

</html>